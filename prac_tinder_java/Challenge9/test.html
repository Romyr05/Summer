<!DOCTYPE html>

<meta charset="UTF-8">
<meta name="description" content="Objects">
<meta name="keywords" content="HTML, CSS, JavaScript">
<meta name="author" content="John Romyr">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Objects</title>

<body>
    <h1> Rock Paper and Scissors</h1>

    
    <p>
        <button onclick=
        "play('rock')
        ">Rock</button>

        <button onclick = "
        play('paper')
        ">Paper</button>

        <button onclick = "play('scissors')"
        >Scissors</button>

    </p>

        <p class = 'j-score' >test</p>

    <p>
        <button onclick ="
        score.wins = 0;
        score.lose = 0;
        score.tie = 0;
        localStorage.setItem('score',JSON.stringify(score));
        updateScore();
        alert(`Wins: ${score.wins}, Losses ${score.lose} Ties: ${score.tie}`);">Reset Score</button>
    </p>

    <p> Amazon Shipping Calculator</p>

    <input placeholder="Cost of product" class = 'js-cost'>
    <button onclick="calcOrder()">Calculate</button>;
    <p class = 'js-value'></p>


    <script>

        //must have a local storage first 
        const score = JSON.parse(localStorage.getItem('score')) ||
         {
            wins : 0,
            lose:0,
            tie:0
        };

        //the one above is the same as
        /*
        if(score === null)
        {
         score = {
            wins : 0,
            lose:0,
            tie:0
        };
        }
        */

        function play(player_move){

            let computer_choice = "";

            const randomMov = Math.random();
            console.log(`random number: ${randomMov}`);
            if(randomMov <= 1/3)
            {
                computer_choice = 'rock';
            }
            else if(randomMov <= 2/3)
            {
                computer_choice = 'paper';
            }
            else{
                computer_choice = 'scissors';
            }
            console.log(computer_choice);

            let result = '';
            

            if(player_move === computer_choice)
            {
                    score.tie++;
                    alert(`You picked ${player_move}. Computer picked ${computer_choice}. Its a tie
Wins: ${score.wins}, Losses ${score.lose} Ties: ${score.tie}`);
            }
            else if
               ((player_move === 'rock' && computer_choice === 'scissors')
                || (player_move === 'scissors' && computer_choice === 'paper') 
                || (player_move === 'paper' && computer_choice === 'rock')){
                    score.wins++;
                    alert(`You picked ${player_move}. Computer picked ${computer_choice}. You Win 
Wins: ${score.wins}, Losses ${score.lose} Ties: ${score.tie}`
                        
                    );
                }
            else {
                 score.lose++;
                    alert(`You picked ${player_move}. Computer picked ${computer_choice}. You Lose
Wins: ${score.wins}, Losses ${score.lose} Ties: ${score.tie}`);
            }



        localStorage.setItem('score',JSON.stringify(score));
        updateScore();


        }

        function updateScore(){
            document.querySelector('.j-score').innerHTML= `Wins: ${score.wins}, Losses ${score.lose} Ties: ${score.tie}`; 
        }

        updateScore()

        function calcOrder(){
            const input = document.querySelector('.js-cost').value;
            let cost = Number(input);

            if(cost > 50)
            {
                console.log(cost);
                cost = cost + 10;
            }
            document.querySelector('.js-value').innerHTML = cost;
        }

    </script>





</body>